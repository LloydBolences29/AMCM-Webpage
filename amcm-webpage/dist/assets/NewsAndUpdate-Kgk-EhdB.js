import{j as e,r as n,a as le}from"./index-CU6FVKgc.js";import{M as L}from"./Footer-Q0PT6RDh.js";import{B as W}from"./Button-ECdBtxHj.js";import{c as de}from"./createSvgIcon-CIQck3fE.js";import{M as ce}from"./MainLayout-Cx_YfM2C.js";import{C as pe}from"./Container-D7N4jGd3.js";import{C as ue,a as he}from"./CardContent-DjYWvZSl.js";import{T as q}from"./Typography-BU50Eekg.js";import{S as Z,A as ee,I as me}from"./Alert-DOzaPcP_.js";import{a as se,g as ae,u as re,s as A,c as G,i as N,b as ie,m as T}from"./DefaultPropsProvider-BEWS1EG7.js";import{D as ge,a as fe,b as we,c as xe}from"./DialogActions-M5VKg6Qo.js";import{u as be,f as ve}from"./Modal-BYDPAa-9.js";import{u as V}from"./useSlot-CCE1CtRx.js";import{c as je}from"./createSimplePaletteValueFilter-CHMUn0vP.js";import{S as ye}from"./SwitchBase-APWQFqdI.js";import"./Button-Dxk-fcaG.js";/* empty css             */import"./Paper-3KbYhAFn.js";import"./index-BLzNA8lQ.js";import"./ButtonBase-B6JcpL9Z.js";import"./extends-CF3RwP-h.js";import"./getReactElementRef-CFcaMeZi.js";import"./ownerDocument-DW-IO8s5.js";import"./CircularProgress-DA1wQFbY.js";import"./Fade-BEiAPpD_.js";import"./ownerWindow-HkKU3E4x.js";const te=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{id:"no-content-wrapper",children:[e.jsx("div",{id:"no-content-image-wrapper",children:e.jsx("img",{src:"/no-content.png",alt:"no-content-available",id:"no-content-image"})}),e.jsx("div",{id:"no-content-text-wrapper",children:e.jsx("p",{id:"no-content-text",children:"No news and updates at the moment, but good things are coming. Just wait for it."})})]})});function Se(t){return ae("MuiSwitch",t)}const d=se("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Ce=t=>{const{classes:a,edge:r,size:c,color:h,checked:S,disabled:g}=t,b={root:["root",r&&`edge${N(r)}`,`size${N(c)}`],switchBase:["switchBase",`color${N(h)}`,S&&"checked",g&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},v=ie(b,Se,a);return{...a,...v}},ke=A("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[a.root,r.edge&&a[`edge${N(r.edge)}`],a[`size${N(r.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${d.thumb}`]:{width:16,height:16},[`& .${d.switchBase}`]:{padding:4,[`&.${d.checked}`]:{transform:"translateX(16px)"}}}}]}),$e=A(ye,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[a.switchBase,{[`& .${d.input}`]:a.input},r.color!=="default"&&a[`color${N(r.color)}`]]}})(T(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${d.checked}`]:{transform:"translateX(20px)"},[`&.${d.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${d.checked} + .${d.track}`]:{opacity:.5},[`&.${d.disabled} + .${d.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${d.input}`]:{left:"-100%",width:"300%"}})),T(({theme:t})=>({"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(je(["light"])).map(([a])=>({props:{color:a},style:{[`&.${d.checked}`]:{color:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[a].main,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${d.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${a}DisabledColor`]:`${t.palette.mode==="light"?t.lighten(t.palette[a].main,.62):t.darken(t.palette[a].main,.55)}`}},[`&.${d.checked} + .${d.track}`]:{backgroundColor:(t.vars||t).palette[a].main}}}))]}))),Ne=A("span",{name:"MuiSwitch",slot:"Track"})(T(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`}))),Fe=A("span",{name:"MuiSwitch",slot:"Thumb"})(T(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),Ae=n.forwardRef(function(a,r){const c=re({props:a,name:"MuiSwitch"}),{className:h,color:S="primary",edge:g=!1,size:b="medium",sx:v,slots:j={},slotProps:o={},...p}=c,f={...c,color:S,edge:g,size:b},C=Ce(f),k={slots:j,slotProps:o},[l,y]=V("root",{className:G(C.root,h),elementType:ke,externalForwardedProps:k,ownerState:f,additionalProps:{sx:v}}),[D,I]=V("thumb",{className:C.thumb,elementType:Fe,externalForwardedProps:k,ownerState:f}),w=e.jsx(D,{...I}),[F,P]=V("track",{className:C.track,elementType:Ne,externalForwardedProps:k,ownerState:f});return e.jsxs(l,{...y,children:[e.jsx($e,{type:"checkbox",icon:w,checkedIcon:w,ref:r,ownerState:f,...p,classes:{...C,root:C.switchBase},slots:{...j.switchBase&&{root:j.switchBase},...j.input&&{input:j.input}},slotProps:{...o.switchBase&&{root:typeof o.switchBase=="function"?o.switchBase(f):o.switchBase},input:{role:"switch"},...o.input&&{input:typeof o.input=="function"?o.input(f):o.input}}}),e.jsx(F,{...P})]})});function Pe(t){return ae("MuiFormControlLabel",t)}const U=se("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),_e=t=>{const{classes:a,disabled:r,labelPlacement:c,error:h,required:S}=t,g={root:["root",r&&"disabled",`labelPlacement${N(c)}`,h&&"error",S&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",h&&"error"]};return ie(g,Pe,a)},Be=A("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[{[`& .${U.label}`]:a.label},a.root,a[`labelPlacement${N(r.labelPlacement)}`]]}})(T(({theme:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${U.disabled}`]:{cursor:"default"},[`& .${U.label}`]:{[`&.${U.disabled}`]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:a})=>a==="start"||a==="top"||a==="bottom",style:{marginLeft:16}}]}))),Te=A("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(T(({theme:t})=>({[`&.${U.error}`]:{color:(t.vars||t).palette.error.main}}))),De=n.forwardRef(function(a,r){const c=re({props:a,name:"MuiFormControlLabel"}),{checked:h,className:S,componentsProps:g={},control:b,disabled:v,disableTypography:j,inputRef:o,label:p,labelPlacement:f="end",name:C,onChange:k,required:l,slots:y={},slotProps:D={},value:I,...w}=c,F=be(),P=v??b.props.disabled??F?.disabled,M=l??b.props.required,O={disabled:P,required:M};["checked","name","onChange","value","inputRef"].forEach(_=>{typeof b.props[_]>"u"&&typeof c[_]<"u"&&(O[_]=c[_])});const R=ve({props:c,muiFormControl:F,states:["error"]}),m={...c,disabled:P,labelPlacement:f,required:M,error:R.error},z=_e(m),H={slots:y,slotProps:{...g,...D}},[J,u]=V("typography",{elementType:q,externalForwardedProps:H,ownerState:m});let $=p;return $!=null&&$.type!==q&&!j&&($=e.jsx(J,{component:"span",...u,className:G(z.label,u?.className),children:$})),e.jsxs(Be,{className:G(z.root,S),ownerState:m,ref:r,...w,children:[n.cloneElement(b,O),M?e.jsxs("div",{children:[$,e.jsxs(Te,{ownerState:m,"aria-hidden":!0,className:z.asterisk,children:["â€‰","*"]})]}):$]})}),Me=de(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Re=A(xe)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}})),dt=()=>{const t=()=>{const s={};l.title.trim()||(s.title="Title is required."),l.issued_date||(s.issued_date="Issued Date is required."),l.news_description.trim()||(s.news_description="Description is required.");const i=document.getElementById("news-thumbnail");(!i||i.files.length===0)&&(s.thumbnail="Thumbnail image is required.");const x=document.getElementById("news-file");return(!x||x.files.length===0)&&(s.pdfFile="PDF file is required."),f(s),Object.keys(s).length===0},a={title:"",issued_date:"",news_description:""},{auth:r}=le(),[c,h]=n.useState("idle"),[S,g]=n.useState(!1),[b,v]=n.useState(!1),[j,o]=n.useState(""),[p,f]=n.useState({}),[C,k]=n.useState(!1),[l,y]=n.useState(a),[D,I]=n.useState("All"),[w,F]=n.useState([]),[P,M]=n.useState([]),[O,R]=n.useState(!1),[m,z]=n.useState(null),H=()=>k(!1),J=()=>k(!0),u="/api",$=async()=>{if(t())try{const s=new FormData;s.append("title",l.title),s.append("issued_date",l.issued_date),s.append("news_description",l.news_description);const i=document.getElementById("news-thumbnail"),x=document.getElementById("news-file");i.files.length>0&&s.append("news-thumbnail",i.files[0]),x.files.length>0&&s.append("news-file",x.files[0]);const B=await fetch(`${u}/page/upload-image`,{method:"POST",body:s,credentials:"include"});if(console.log("data being sent",s),B.ok){const E=await B.json();console.log("News submitted successfully:",E),h("success"),o("News and Update added successfully."),g(!0),y(a),k(!1),X(),K()}else{const E=await B.json();console.error("Server error:",E),h("error"),o("Failed to add News and Update. Please try again."),v(!0)}}catch(s){h("error"),o("An unexpected error occurred. Please try again."),v(!0),console.error("Error submitting news:",s)}},_=async s=>{const i=s.target.value;I(i);try{let x;i==="All"?x=`${u}/page/get-news`:x=r.isAuthenticated&&(r.user.role==="editor"||r.user.role==="admin")?`${u}/page/filter-date?year=${i}&includeInactive=true`:`${u}/page/filter-date?year=${i}`;const B=await fetch(x);if(B.ok){const E=await B.json();F(E.rows)}}catch(x){console.error("Error filtering news by date:",x)}},X=async()=>{try{const s=await fetch(`${u}/page/get-news`);if(s.ok){const i=await s.json();F(i.rows)}}catch(s){console.error("Error fetching news:",s)}},oe=async()=>{const s=m.is_Active==="active"?"inactive":"active";try{(await fetch(`${u}/page/update-status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:m.id,is_Active:s}),credentials:"include"})).ok&&(o("Status updated successfully."),h("success"),g(!0),X(),R(!1))}catch{console.log("Error Updating the status of the card"),v(!0),o("An unexpected error occurred. Please try again.")}},K=async()=>{try{const s=await fetch(`${u}/page/get-news-year`);if(s.ok){const i=await s.json();M(i.rows)}}catch(s){console.error("Error fetching years:",s)}},ne=s=>{z(s),R(!0)};n.useEffect(()=>{X(),K()},[]);const Y=(s,i)=>{i!=="clickaway"&&(g(!1),v(!1))},Q=()=>{R(!1)};return console.log("Selected Card: ",m?.id),e.jsxs(ce,{children:[e.jsx(pe,{children:e.jsx(ue,{sx:{mb:3,textAlign:"center",marginTop:"2em",backgroundColor:"#163235ff",borderRadius:"10px"},children:e.jsx(he,{children:e.jsx(q,{variant:"h4",component:"h1",className:"page-title fw-bold",sx:{color:"#ffffffff"},children:"News and Update"})})})}),e.jsx("div",{id:"news-and-update-container",children:e.jsxs("div",{id:"news-and-update-wrapper",children:[r.isAuthenticated&&(r.user.role==="editor"||r.user.role==="admin")&&e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"add-news-button-wrapper",children:e.jsx("button",{id:"add-news-button",onClick:J,children:"Add News"})}),c==="success"?e.jsx(Z,{open:S,autoHideDuration:5e3,onClose:Y,children:e.jsx(ee,{onClose:Y,severity:"success",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:j})}):e.jsx(Z,{open:b,autoHideDuration:5e3,onClose:Y,children:e.jsx(ee,{onClose:Y,severity:"error",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:j})}),e.jsxs(L,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:C,onHide:H,children:[e.jsx(L.Header,{closeButton:!0,children:e.jsx(L.Title,{id:"contained-modal-title-vcenter",children:"Add News and Update"})}),e.jsx(L.Body,{children:e.jsxs("form",{action:"",method:"post",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"news-title",children:"Title:"}),e.jsx("input",{type:"text",id:"news-title",name:"news-title",className:"form-control",onChange:s=>y({...l,title:s.target.value})}),p.title&&e.jsx("small",{className:"text-danger",children:p.title})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"news-content",children:"Description:"}),e.jsx("textarea",{id:"news-content",name:"news-content",className:"form-control",rows:"5",onChange:s=>y({...l,news_description:s.target.value})}),p.news_description&&e.jsx("small",{className:"text-danger",children:p.news_description})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"news-date",children:"Issued Date:"}),e.jsx("input",{type:"date",id:"news-date",name:"news-date",className:"form-control",onChange:s=>y({...l,issued_date:s.target.value})}),p.issued_date&&e.jsx("small",{className:"text-danger",children:p.issued_date})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"news-thumbnail",children:"Thumbnail:"}),e.jsx("input",{type:"file",id:"news-thumbnail",name:"news-thumbnail",className:"form-control",onChange:s=>y({...l,thumbnail:s.target.files[0].name,pdfFile_originalName:s.target.files[0].name}),accept:"image/png, image/jpeg, image/svg+xml"}),p.thumbnail&&e.jsx("small",{className:"text-danger",children:p.thumbnail})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"news-thumbnail",children:"PDF File:"}),e.jsx("input",{type:"file",id:"news-file",name:"news-file",className:"form-control",onChange:s=>y({...l,pdfFile_originalName:s.target.files[0].name}),accept:"application/pdf"}),p.pdfFile&&e.jsx("small",{className:"text-danger",children:p.pdfFile})]})]})}),e.jsxs(L.Footer,{children:[e.jsx(W,{onClick:$,children:"Submit"}),e.jsx(W,{variant:"danger",onClick:H,children:"Close"})]})]})]}),r.isAuthenticated&&(r.user.role==="editor"||r.user.role==="admin")&&e.jsxs(Re,{onClose:Q,"aria-labelledby":"customized-dialog-title",open:O,children:[e.jsxs(ge,{sx:{m:0,p:2},id:"customized-dialog-title",children:["Set to: ",m&&m.is_Active==="active"?"Inactive":"Active"]}),e.jsx(me,{"aria-label":"close",onClick:Q,sx:s=>({position:"absolute",right:8,top:8,color:s.palette.grey[500]}),children:e.jsx(Me,{})}),e.jsxs(fe,{dividers:!0,children:[e.jsx(q,{gutterBottom:!0,children:"Are you sure you want to change the status of this news and update?"}),e.jsxs(q,{gutterBottom:!0,children:["Current status: ",m&&m.is_Active==="active"?"Active":"Inactive"]})]}),e.jsx(we,{children:e.jsx(W,{autoFocus:!0,onClick:oe,children:"Save changes"})})]}),r.isAuthenticated&&(r.user.role==="editor"||r.user.role==="admin")?w&&w.length>0?e.jsx("div",{id:"news-and-update-cards-container",children:w.map(s=>e.jsx("div",{className:"news-and-update-card",children:e.jsxs("div",{id:"news-and-update-card-wrapper",children:[e.jsx("img",{id:"thumbnail-images",src:`${u}/uploads/thumbnail/${s.thumbnail}`,loading:"lazy",alt:"News Thumbnail",className:"news-thumbnail"}),e.jsxs("div",{id:"news-and-update-card-details",children:[e.jsx("div",{id:"news-and-update-card-title",children:e.jsx("h3",{children:s.title})}),e.jsxs("div",{id:"news-and-update-card-content",children:[e.jsx("p",{children:s.news_description}),e.jsxs("p",{children:["Issued Date: ",s.issued_date]})]}),e.jsx("div",{id:"read-more-button-wrapper",children:e.jsx("a",{href:`${u}/uploads/pdfFile/${s.unique_filename}`,target:"_blank",rel:"noopener noreferrer",children:"Read More"})}),e.jsx("div",{id:"status-indicator-wrapper",children:e.jsx(De,{control:e.jsx(Ae,{sx:{m:1},checked:s.is_Active==="active",onChange:()=>ne(s),color:"primary"}),label:s.is_Active==="active"?"Active":"Inactive"})})]})]})},s.id))}):e.jsx("div",{id:"no-content-news-update",children:e.jsx(te,{})}):w&&w.filter(s=>s.is_Active==="active").length>0?e.jsx("div",{id:"news-and-update-cards-container",children:w.filter(s=>s.is_Active==="active").map(s=>e.jsx("div",{className:"news-and-update-card",children:e.jsxs("div",{id:"news-and-update-card-wrapper",children:[e.jsx("img",{id:"thumbnail-images",src:`${u}/uploads/thumbnail/${s.thumbnail}`,loading:"lazy",alt:"News Thumbnail",className:"news-thumbnail"}),e.jsxs("div",{id:"news-and-update-card-details",children:[e.jsx("div",{id:"news-and-update-card-title",children:e.jsx("h3",{children:s.title})}),e.jsxs("div",{id:"news-and-update-card-content",children:[e.jsx("p",{children:s.news_description}),e.jsxs("p",{children:["Issued Date: ",s.issued_date]})]}),e.jsx("div",{id:"read-more-button-wrapper",children:e.jsx("a",{href:`${u}/uploads/pdfFile/${s.unique_filename}`,target:"_blank",rel:"noopener noreferrer",children:"Read More"})})]})]})},s.id))}):e.jsx("div",{id:"no-content-news-update",children:e.jsx(te,{})}),e.jsx("div",{id:"date-filter-sections",children:e.jsxs("div",{id:"filter-options",children:[e.jsx("div",{id:"label-filter",children:e.jsx("label",{htmlFor:"",children:"Filter by year: "})}),e.jsx("div",{id:"options-filter",children:e.jsx("div",{className:"filter-option",children:e.jsxs("select",{name:"year",id:"year",value:D,onChange:_,children:[e.jsx("option",{value:"All",defaultValue:!0,children:"All"}),P.map(s=>e.jsx("option",{value:`${s.issued_year}`,children:s.issued_year},s.id))]})})})]})})]})})]})};export{dt as default};
