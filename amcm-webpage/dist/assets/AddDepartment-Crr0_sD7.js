import{r,j as e}from"./index-1y3UAu6N.js";import{C as k}from"./Container-B9Qe7Udh.js";import{R as f}from"./Row-DkFBgvvI.js";import{C as i}from"./Col-CLIeRPa0.js";import{C as a}from"./Card-DP6O1tOx.js";import{B as u}from"./Badge-DRVEdUCg.js";import{S as j,A as g}from"./Alert-6LqMrRQy.js";import{F as m}from"./Form-CVo1IMGl.js";import{B}from"./Button-DuTH_Hsw.js";import{L as N}from"./ListGroup-BbsHs5Fn.js";import"./Footer-DEjXnE2X.js";import"./CardHeaderContext-BBRb2s5G.js";import"./ButtonBase-B-Rnfy97.js";import"./DefaultPropsProvider-D4Td3UxR.js";import"./extends-CF3RwP-h.js";import"./createSimplePaletteValueFilter-Mcy8FDC4.js";import"./useSlot-DG_Pp0Lk.js";import"./getReactElementRef-CU6zTt4J.js";import"./ownerDocument-DW-IO8s5.js";import"./Paper-25ehZ_rl.js";import"./createSvgIcon-DR9AEGWY.js";import"./CircularProgress-CmbX6jye.js";import"./Button-D8NJ8Bso.js";import"./hook-DYuvmNqw.js";import"./Nav-CDj_L2Dc.js";const ee=()=>{const[o,y]=r.useState([]),[l,d]=r.useState(""),[b,p]=r.useState(!1),[S,c]=r.useState(!1),[C,h]=r.useState("idle"),x="/api",w=async()=>{try{const t=await(await fetch(`${x}/department/get-departments`,{credentials:"include"})).json();y(t),console.log("Departments:",t)}catch(s){console.error("Error fetching departments:",s)}};r.useEffect(()=>{w()},[]);const n=(s,t)=>{t!=="clickaway"&&(p(!1),c(!1))},D=async s=>{try{console.log("the department",s);const t=await fetch(`${x}/department/add-department`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s}),credentials:"include"});if(console.log("Response status:",t),t.ok)h("success"),p(!0),d(""),console.log("Adding department:",s);else{c(!0);const v=await t.json();console.error("Error adding department:",v)}}catch(t){h("error"),c(!0),console.error("Error adding department:",t)}};return e.jsx(k,{className:"py-5",children:e.jsx(f,{className:"justify-content-center",children:e.jsx(i,{lg:8,md:10,sm:10,children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(a.Header,{className:"text-white text-center py-3",style:{backgroundColor:"#007682"},children:e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-building me-2"}),"Department Management"]})}),e.jsx(a.Body,{className:"p-4",children:e.jsxs(f,{children:[e.jsx(i,{md:6,children:e.jsxs(a,{className:"mb-4 h-100",children:[e.jsx(a.Header,{style:{backgroundColor:"#163235",color:"white"},children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-plus-circle me-2"}),"Add New Department"]})}),e.jsxs(a.Body,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(u,{style:{backgroundColor:"#007682"},className:"mb-2",children:"Instructions"}),e.jsx("p",{className:"text-muted small",children:"Enter the name of the new department you want to add to the system."})]}),C==="success"?e.jsx(j,{open:b,autoHideDuration:5e3,onClose:n,children:e.jsx(g,{onClose:n,severity:"success",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:"Department saved successfully!"})}):e.jsx(j,{open:S,autoHideDuration:5e3,onClose:n,children:e.jsx(g,{onClose:n,severity:"error",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:"Failed on saving the Department!"})}),e.jsxs(m.Group,{className:"mb-3",children:[e.jsxs(m.Label,{className:"fw-bold",children:[e.jsx("i",{className:"fas fa-tag me-2"}),"Department Name"]}),e.jsx(m.Control,{type:"text",value:l,onChange:s=>d(s.target.value),placeholder:"Enter department name",className:"form-control-lg"})]}),e.jsx("div",{className:"d-grid",children:e.jsxs(B,{onClick:()=>D(l),size:"lg",className:"py-2",disabled:!l.trim(),style:{backgroundColor:"#007682",borderColor:"#007682"},children:[e.jsx("i",{className:"fas fa-plus-circle me-2"}),"Add Department"]})})]})]})}),e.jsx(i,{md:6,children:e.jsxs(a,{className:"mb-4 h-100",children:[e.jsx(a.Header,{className:"bg-light",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-list me-2"}),"Existing Departments (",o.length,")"]})}),e.jsx(a.Body,{className:"p-0",children:o.length===0?e.jsx("div",{className:"text-center py-4",children:e.jsxs("div",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-inbox fa-3x mb-3"}),e.jsx("p",{children:"No departments found"})]})}):e.jsx(N,{className:"list-group-flush",style:{maxHeight:"300px",overflowY:"auto"},children:o.map(s=>e.jsxs(N.Item,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-building text-primary me-2"}),e.jsx("span",{className:"fw-medium",children:s.Name})]}),e.jsxs(u,{bg:"secondary",pill:!0,children:["ID: ",s.ID]})]},s.ID))})})]})})]})})]})})})})};export{ee as default};
