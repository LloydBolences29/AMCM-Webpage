import{a as P,r as n,j as e}from"./index-DlVAgkeO.js";import{M as B}from"./MainLayout-DCJjboZG.js";import{S as b,A as U}from"./Alert-BEPAvXT2.js";import{C as k}from"./Container-BIF8FkmX.js";import{C as F,a as E}from"./CardContent-CvlB1fGZ.js";import{T as O}from"./Typography-pWighfrS.js";import{A as I}from"./Avatar-rUey5CxY.js";import{C as T}from"./Chip-DD0PVBhp.js";import{D as z}from"./Divider-8ZP_5pWK.js";import{F as s}from"./Form-B6uVeF9r.js";import{R as l}from"./Row-BmoNzbsl.js";import{C as a}from"./Col-DbWGna5v.js";import{B as h}from"./Button-BwE_hpmx.js";import{M as d}from"./Footer-DvhtKQwl.js";/* empty css             */import"./ButtonBase-YcRQN4Tw.js";import"./DefaultPropsProvider-B48Vp2qw.js";import"./extends-CF3RwP-h.js";import"./createSimplePaletteValueFilter-BgsaNsIW.js";import"./useSlot-CA_X_iIE.js";import"./getReactElementRef-J8UyCM58.js";import"./ownerDocument-DW-IO8s5.js";import"./Paper-CWKuupwg.js";import"./createSvgIcon-ciaCS_cv.js";import"./CircularProgress-Cg5E58L3.js";import"./index-sKi7l6K1.js";import"./dividerClasses-BYKdAZbo.js";import"./Button-DxlEX406.js";const pe=()=>{const{auth:f}=P(),j="/api",[L,C]=n.useState(!1),[w,m]=n.useState(!1),[A,u]=n.useState("idle"),[g,p]=n.useState(""),[v,y]=n.useState(!1),[r,i]=n.useState({firstname:"",lastname:"",email:"",username:""}),N=()=>y(!0),x=()=>y(!1),c=(t,o)=>{o!=="clickaway"&&(C(!1),m(!1))},S=async()=>{try{const t=await fetch(`${j}/user/get-user/${f.user?.id}`,{credentials:"include"}),o=await t.json();console.log("Data: ",o),t.ok&&i(o)}catch(t){console.log("Error Fetching User Profile.",t)}};n.useEffect(()=>{S()},[]);const M=async()=>{try{const t=await fetch(`${j}/user/update-user-profile/${f.user?.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)}),o=await t.json();t.ok?(u("success"),p(o.message),C(!0),S(),x()):(u("error"),p(o.message||"Failed to update user information."),m(!0))}catch(t){console.log("Error updating user info:",t),u("error"),p(t.message),m(!0)}};return console.log("Auth in Profile:",r),e.jsxs(B,{children:[A==="success"?e.jsx(b,{open:L,autoHideDuration:5e3,onClose:c,children:e.jsx(U,{onClose:c,severity:"success",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:g})}):e.jsx(b,{open:w,autoHideDuration:5e3,onClose:c,children:e.jsx(U,{onClose:c,severity:"error",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:g})}),e.jsx(k,{children:e.jsx(F,{sx:{mb:3,textAlign:"center",marginTop:"2em",backgroundColor:"#163235ff",borderRadius:"10px"},children:e.jsx(E,{children:e.jsx(O,{variant:"h4",component:"h1",className:"page-title fw-bold",sx:{color:"#ffffffff",fontFamily:"Advent Sans, sans-serif"},children:"User Profile"})})})}),e.jsxs("div",{className:"profile-container",children:[e.jsxs("div",{className:"profile-page",children:[e.jsx(I,{className:"profile-avatar",children:r?.firstname?r?.firstname[0]:"N"}),e.jsxs("div",{className:"user-profile-information",children:[e.jsx("div",{children:e.jsxs("p",{className:"welcome-message",children:["Welcome, ",r?.username?r.username:"User","!"]})}),e.jsx("div",{children:e.jsx("p",{className:"profile-info",children:e.jsx(T,{label:r?.role?r.role.charAt(0).toUpperCase()+r.role.slice(1):"",color:"primary",variant:"outlined",sx:{px:2,py:0,fontSize:"1rem",height:"auto"}})})})]})]}),e.jsx(z,{sx:{height:20,borderColor:"black",borderBottomWidth:2},orientation:"horizontal"})]}),e.jsxs(k,{children:[e.jsx(s,{children:e.jsxs(s.Group,{children:[e.jsxs(l,{children:[e.jsxs(a,{md:6,children:[e.jsx(s.Label,{children:"Firstname: "}),e.jsx(s.Control,{type:"text",value:r?.firstname||"",readOnly:!0})]}),e.jsxs(a,{md:6,children:[e.jsx(s.Label,{children:"Lastname: "}),e.jsx(s.Control,{type:"text",value:r?.lastname||"",readOnly:!0})]})]}),e.jsx("br",{}),e.jsxs(l,{children:[e.jsxs(a,{md:6,children:[e.jsx(s.Label,{children:"Email: "}),e.jsx(s.Control,{type:"text",value:r?.email||"",readOnly:!0})]}),e.jsxs(a,{md:6,children:[e.jsx(s.Label,{children:"Username: "}),e.jsx(s.Control,{type:"text",value:r?.username||"",readOnly:!0})]})]}),e.jsx("br",{})]})}),e.jsx(l,{children:e.jsx(a,{md:6,className:"d-flex gap-2",children:e.jsx(h,{variant:"outline-success",onClick:N,children:"Update info"})})})]}),v&&e.jsxs(d,{size:"md",show:v,onHide:x,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(d.Header,{closeButton:!0,children:e.jsxs(d.Title,{id:"contained-modal-title-vcenter",children:["Update Information for ",r?.firstname]})}),e.jsx(d.Body,{children:e.jsx("div",{children:e.jsx(s,{children:e.jsxs(s.Group,{children:[e.jsxs(l,{children:[e.jsxs(a,{md:6,children:[e.jsx(s.Label,{children:"Firstname: "}),e.jsx(s.Control,{required:!0,type:"text",value:r.firstname||"",onChange:t=>i({...r,firstname:t.target.value})})]}),e.jsxs(a,{md:6,children:[e.jsx(s.Label,{children:"Lastname: "}),e.jsx(s.Control,{required:!0,type:"text",value:r.lastname||"",onChange:t=>i({...r,lastname:t.target.value})})]})]}),e.jsx("br",{}),e.jsxs(l,{children:[e.jsxs(a,{md:6,children:[e.jsx(s.Label,{children:"Email: "}),e.jsx(s.Control,{required:!0,type:"email",value:r.email||"",onChange:t=>i({...r,email:t.target.value})})]}),e.jsxs(a,{md:6,children:[e.jsx(s.Label,{children:"Username: "}),e.jsx(s.Control,{required:!0,type:"text",value:r.username||"",onChange:t=>i({...r,username:t.target.value})})]})]})]})})})}),e.jsxs(d.Footer,{children:[e.jsx(h,{onClick:x,children:"Close"}),e.jsx(h,{variant:"outline-success",onClick:M,children:"Update"})]})]})]})};export{pe as default};
