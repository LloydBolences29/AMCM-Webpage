import{r,j as e}from"./index-CH27Beym.js";import{C as B}from"./Container-BdL84pDi.js";import{R as v}from"./Row-T6lLZ6_c.js";import{C as j}from"./Col-1dE1JxJt.js";import{C as f}from"./Card-DC9unvEz.js";import{B as F}from"./Badge-D9zwNTSv.js";import{S as C,A as N}from"./Alert-3s0gBCOM.js";import{F as s}from"./Form-BZ0ETNCW.js";import{L as _}from"./ListGroup-C-l8fkIX.js";import{B as A}from"./Button-AsRw39wd.js";import"./Footer-D2Q2iCNQ.js";import"./CardHeaderContext-BYU8Lddw.js";import"./ButtonBase-CrX34Rid.js";import"./DefaultPropsProvider-BQFJOVLU.js";import"./extends-CF3RwP-h.js";import"./createSimplePaletteValueFilter-Dh0TRCQ5.js";import"./useSlot-BhEGg-2m.js";import"./getReactElementRef-DYPJPfdo.js";import"./ownerDocument-DW-IO8s5.js";import"./Paper-DCCYYBpF.js";import"./createSvgIcon-DngBmo0W.js";import"./CircularProgress-jb664nPt.js";import"./hook-B5z_A2cV.js";import"./Nav-SkAIHCY5.js";import"./Button-Bc2rXTAv.js";const ne=()=>{const y={doctor_department_id:"",name:"",schedule:"",schedule_type:"clinic",department:"",day_of_the_week:"",start_time:"",end_time:"",notes:"N/A"},[a,n]=r.useState(y),[w,m]=r.useState("idle"),[D,S]=r.useState(!1),[k,u]=r.useState(!1),[g,h]=r.useState(""),[l,p]=r.useState(""),[x,i]=r.useState([]),b="/api",c=(t,o)=>{o!=="clickaway"&&(S(!1),u(!1))},G=async()=>{try{const t=await fetch(`${b}/doctor/get-doctors-departments/${l}`,{credentials:"include"});if(t.ok){const o=await t.json();i(o)}else i([])}catch(t){console.error("Error fetching doctor data:",t)}},L=async t=>{t.preventDefault();try{const o=await fetch(`${b}/doctor/add-schedule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),credentials:"include"});if(console.log("To be sent: ",a),o.ok){const d=await o.json();console.log("New schedule added:",d),m("success"),n(y),p(""),h(d.message),S(!0)}else{const d=await o.json();console.error("Error adding schedule:",o.statusText),m("error"),h(d.message),u(!0)}}catch(o){console.log("Error submitting new schedule:",o),m("error"),h(o.message),u(!0)}},T=t=>{n({...a,doctor_department_id:t.id,name:t.name,department:t.department}),p(t.name),i([])};return r.useEffect(()=>{if(l.trim()===""){i([]);return}G(),console.log("Doctors Data: ",x)},[l]),console.log("Form Data: ",a),e.jsx(e.Fragment,{children:e.jsx(B,{className:"py-5",children:e.jsx(v,{className:"justify-content-center",children:e.jsx(j,{md:8,lg:6,children:e.jsxs(f,{className:"shadow-lg border-0",children:[e.jsx(f.Header,{className:"text-white text-center py-3",style:{backgroundColor:"#007682"},children:e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-user-md me-2"}),"Add New Doctor's Schedule"]})}),e.jsxs(f.Body,{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(F,{className:"mb-2",style:{backgroundColor:"#163235"},children:"Instructions"}),e.jsx("p",{className:"text-muted small",children:"Please fill in all the required information to add a new schedule for the doctor. Make sure all details are accurate before submitting."})]}),w==="success"?e.jsx(C,{open:D,autoHideDuration:5e3,onClose:c,children:e.jsx(N,{onClose:c,severity:"success",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:g})}):e.jsx(C,{open:k,autoHideDuration:5e3,onClose:c,children:e.jsx(N,{onClose:c,severity:"error",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:g})}),e.jsxs(s,{onSubmit:L,children:[e.jsxs(s.Group,{className:"mb-3 position-relative",children:[e.jsx(s.Label,{children:"Doctor's Name"}),e.jsx(s.Control,{type:"text",value:l,placeholder:"Search for a doctor...",onChange:t=>p(t.target.value),required:!0,autoComplete:"off"}),x.length>0&&e.jsx(_,{style:{position:"absolute",zIndex:1e3,width:"100%",maxHeight:"200px",overflowY:"auto"},children:x.map(t=>e.jsxs(_.Item,{action:!0,onClick:()=>T(t),children:[t.name," - ",t.department]},t.id))})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Department"}),e.jsx(s.Control,{type:"text",name:"Department",value:a.department,readOnly:!0,disabled:!0})]}),(a.department==="Obstetrics and Gynecology - Perinatologist - Sonologist"||a.department==="Obstetrics and Gynecology - Sonologist")&&e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Schedule Type"}),e.jsxs(s.Control,{as:"select",value:a.schedule_type,onChange:t=>n({...a,schedule_type:t.target.value}),children:[e.jsx("option",{value:"",children:"Select a schedule type"}),e.jsx("option",{value:"clinic",children:"Clinic"}),e.jsx("option",{value:"ultrasound",children:"Ultrasound"})]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Choose a day"}),e.jsxs(s.Select,{value:a.day_of_the_week,onChange:t=>n({...a,day_of_the_week:t.target.value}),children:[e.jsx("option",{value:"",children:"Select a day"}),e.jsx("option",{value:"Sun",children:"Sunday"}),e.jsx("option",{value:"Mon",children:"Monday"}),e.jsx("option",{value:"Tue",children:"Tuesday"}),e.jsx("option",{value:"Wed",children:"Wednesday"}),e.jsx("option",{value:"Thur",children:"Thursday"}),e.jsx("option",{value:"Fri",children:"Friday"}),e.jsx("option",{value:"Sat",children:"Saturday"})]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Additional Notes: "}),e.jsx(s.Control,{type:"text",rows:3,value:a.notes,onChange:t=>n({...a,notes:t.target.value})})]}),e.jsxs(v,{children:[e.jsx(j,{children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Start time"}),e.jsx(s.Control,{type:"time",value:a.start_time,onChange:t=>n({...a,start_time:t.target.value}),required:!0})]})}),e.jsx(j,{children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"End time"}),e.jsx(s.Control,{type:"time",id:"end_time",value:a.end_time,onChange:t=>n({...a,end_time:t.target.value}),required:!0})]})})]}),e.jsx(A,{type:"submit",style:{backgroundColor:"#007682",borderColor:"#007682"},children:"Submit"})]})]})]})})})})})};export{ne as default};
