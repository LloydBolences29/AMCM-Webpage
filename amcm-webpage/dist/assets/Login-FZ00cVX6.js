import{r as c,j as a,u as S,a as I,b as B}from"./index-CU6FVKgc.js";import{u as j,d as z,c as C,a as w,b as R,C as D,G as y}from"./Footer-Q0PT6RDh.js";import F from"./EKGSpinner-uhr7uYKY.js";import{M as G}from"./MainLayout-Cx_YfM2C.js";import{C as H}from"./Container-C9sdSJD0.js";import{F as i}from"./Form-BWoNYBnf.js";import{u as M}from"./hook-8Xm3QWuH.js";import{A as P}from"./Anchor-DqsZEjoo.js";import{B as $}from"./Button-ECdBtxHj.js";/* empty css             */import"./Col-BOYcffD3.js";import"./extends-CF3RwP-h.js";import"./Button-Dxk-fcaG.js";const L=z("h4");L.displayName="DivStyledAsH4";const A=c.forwardRef(({className:e,bsPrefix:s,as:l=L,...n},t)=>(s=j(s,"alert-heading"),a.jsx(l,{ref:t,className:C(e,s),...n})));A.displayName="AlertHeading";const b=c.forwardRef(({className:e,bsPrefix:s,as:l=P,...n},t)=>(s=j(s,"alert-link"),a.jsx(l,{ref:t,className:C(e,s),...n})));b.displayName="AlertLink";const N=c.forwardRef((e,s)=>{const{bsPrefix:l,show:n=!0,closeLabel:t="Close alert",closeVariant:u,className:g,children:d,variant:h="primary",onClose:p,dismissible:m,transition:f=w,...r}=M(e,{show:"onClose"}),o=j(l,"alert"),k=R(E=>{p&&p(!1,E)}),x=f===!0?w:f,v=a.jsxs("div",{role:"alert",...x?void 0:r,ref:s,className:C(g,o,h&&`${o}-${h}`,m&&`${o}-dismissible`),children:[m&&a.jsx(D,{onClick:k,"aria-label":t,variant:u}),d]});return x?a.jsx(x,{unmountOnExit:!0,...r,ref:void 0,in:n,children:v}):n?v:null});N.displayName="Alert";const T=Object.assign(N,{Link:b,Heading:A});function O(e){return y({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function U(e){return y({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}const ta=()=>{const[e,s]=c.useState({email:"",password:""}),l="/api",[n,t]=c.useState(""),[u,g]=c.useState(!1),d=S(),{loading:h,setAuth:p}=I(),m=r=>{s({...e,[r.target.name]:r.target.value}),t("")},f=async r=>{if(r.preventDefault(),!r.target[0].value||!r.target[1].value){t("Please fill in all fields."),setTimeout(()=>{t("")},3e3);return}try{const o=await B.post(`${l}/auth/login`,e,{withCredentials:!0});switch(console.log("Login successful:",o.data),p({loading:!1,isAuthenticated:!0,user:o.data.user}),o.data.user.role){case"admin":d("/admin");break;case"editor":d("/editor");break;default:d("/")}console.log("Role of the user:",o.data.user.role),s({email:"",password:""})}catch(o){console.error("Login error:",o),t("Invalid email or password"),setTimeout(()=>{t("")},3e3)}};return a.jsx(G,{children:h?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:a.jsx(F,{})}):a.jsxs(H,{children:[a.jsx("h2",{className:"mt-5",children:"Login"}),a.jsxs(i,{className:"mt-5",onSubmit:f,children:[a.jsxs(i.Group,{className:"mb-3",controlId:"formBasicEmail",children:[a.jsx(i.Label,{children:"Email"}),a.jsx(i.Control,{type:"email",name:"email",placeholder:"Enter your email",value:e.email,onChange:m})]}),a.jsxs(i.Group,{className:"mb-3",controlId:"formBasicPassword",children:[a.jsx(i.Label,{children:"Password"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx(i.Control,{type:u?"text":"password",placeholder:"Password",name:"password",value:e.password,onChange:m}),a.jsx("span",{variant:"link",size:"sm",style:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",padding:0},onClick:()=>g(r=>!r),tabIndex:-1,children:u?a.jsx(O,{color:"black"}):a.jsx(U,{color:"black"})})]})]}),n&&a.jsx(T,{variant:"danger",className:"mt-3",children:n}),a.jsx($,{type:"submit",style:{backgroundColor:"#007682",borderColor:"#007682"},children:"Sign In"})]})]})})};export{ta as default};
