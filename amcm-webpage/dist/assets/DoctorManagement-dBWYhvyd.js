import{r,j as e}from"./index-CU6FVKgc.js";import{T as X,P as f}from"./TextField-GaeEX3k1.js";import{B as S}from"./Button-ECdBtxHj.js";import{S as M,A as U}from"./Alert-DOzaPcP_.js";import{T as Y}from"./Table-Eu7fZUmd.js";import{c as Z,D as ee,a as te,b as se}from"./DialogActions-M5VKg6Qo.js";import{g as oe,a as re,u as ae,s as ne,c as ce,b as le,r as ie}from"./DefaultPropsProvider-BEWS1EG7.js";import{T as de}from"./Typography-BU50Eekg.js";import{F as a}from"./Form-BWoNYBnf.js";import{R as N}from"./Row-J6Wi_D9N.js";import{C as u}from"./Col-BOYcffD3.js";import"./Footer-Q0PT6RDh.js";import"./Anchor-DqsZEjoo.js";import"./Button-Dxk-fcaG.js";import"./useSlot-CCE1CtRx.js";import"./ButtonBase-B6JcpL9Z.js";import"./extends-CF3RwP-h.js";import"./createSimplePaletteValueFilter-CHMUn0vP.js";import"./CircularProgress-DA1wQFbY.js";import"./Select-DaiuCjR8.js";import"./Modal-BYDPAa-9.js";import"./ownerWindow-HkKU3E4x.js";import"./ownerDocument-DW-IO8s5.js";import"./getReactElementRef-CFcaMeZi.js";import"./Fade-BEiAPpD_.js";import"./debounce-CVyign04.js";import"./useSlotProps-C7FAmvzv.js";import"./Paper-3KbYhAFn.js";import"./createSvgIcon-CIQck3fE.js";import"./index-BLzNA8lQ.js";function he(c){return oe("MuiDialogContentText",c)}re("MuiDialogContentText",["root"]);const me=c=>{const{classes:l}=c,n=le({root:["root"]},he,l);return{...l,...n}},ue=ne(de,{shouldForwardProp:c=>ie(c)||c==="classes",name:"MuiDialogContentText",slot:"Root"})({}),pe=r.forwardRef(function(l,d){const n=ae({props:l,name:"MuiDialogContentText"}),{children:P,className:p,...x}=n,j=me(x);return e.jsx(ue,{component:"p",variant:"body1",color:"textSecondary",ref:d,ownerState:x,className:ce(j.root,p),...n,classes:j})}),Je=()=>{const[c,l]=r.useState([]),[d,n]=r.useState(""),[P,p]=r.useState(""),[x,j]=r.useState(""),[$,T]=r.useState(!1),[A,C]=r.useState(!1),[F,y]=r.useState("idle"),[k,D]=r.useState(!1),[b,G]=r.useState(null),[o,h]=r.useState({id:"",name:"",roomNumber:"",localPhone:"",schedules:{Clinic:[],Ultrasound:[]}}),[z,O]=r.useState([]),[E,I]=r.useState(0),[i,v]=r.useState(1),[R,H]=r.useState(""),m="/api",B=async()=>{try{const t=await fetch(`${m}/doctor/get-all-doctors?page=${i}&limit=10`);t.ok||(n(t.message),l([]));const s=await t.json();l(s.doctors),I(s.pagination.totalPages)}catch(t){console.log("Error fetching doctors:",t)}},_=async t=>{try{const s=await fetch(`${m}/doctor/get-doctors-by-id/${t}`);if(!s.ok){n(s.message);return}const w=await s.json();h(Q=>({...Q,...w}))}catch(s){console.log("Error fetching doctor by id:",s),n(s.message)}},J=async()=>{try{const s=await(await fetch(`${m}/department/get-departments`,{credentials:"include"})).json();O(s)}catch(t){console.error("Error fetching departments:",t)}},V=async()=>{const t={name:o.name,roomNo:o.roomNumber,localPhone:o.localPhone,departmentId:o.departmentId};try{const s=await fetch(`${m}/doctor/doctor-update-information/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!s.ok){y("error"),C(!0),p(s.message);return}const w=await s.json();D(!1),y("success"),T(!0),j(w.message),B()}catch(s){console.log("Error updating doctor:",s),C(!0),y("error"),p(s.message)}},W=async()=>{try{const t=await fetch(`${m}/doctor/get-doctors-departments/${R}`);if(t.ok){const s=await t.json();l(s),I(1),n("")}else t.status===404&&n("No doctors found.")}catch(t){console.log("Error Searching for doctor.",t)}};r.useEffect(()=>{B()},[i]),r.useEffect(()=>{b&&(_(b.id),J())},[b]);const q=t=>{G(t),D(!0)},L=()=>{D(!1)},g=(t,s)=>{s!=="clickaway"&&(T(!1),C(!1))},K=()=>{let t=[];for(let s=1;s<=E;s++)t.push(e.jsx(f.Item,{active:s===i,onClick:()=>v(s),children:s},s));return t};return e.jsxs("div",{children:[e.jsxs("div",{id:"doctor-search-bar",children:[e.jsxs("div",{id:"doctor-search-input",children:[e.jsx(X,{id:"standard-basic",label:"Search for Doctors",variant:"outlined",size:"small",value:R,onChange:t=>H(t.target.value)})," "]}),e.jsx("div",{id:"doctor-search-btn",children:e.jsx(S,{variant:"outline-primary",onClick:()=>W(),children:"Search"})})]}),F==="success"?e.jsx(M,{open:$,autoHideDuration:5e3,onClose:g,children:e.jsx(U,{onClose:g,severity:"success",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:x})}):e.jsx(M,{open:A,autoHideDuration:5e3,onClose:g,children:e.jsx(U,{onClose:g,severity:"error",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:P})}),d?e.jsx("p",{style:{color:"red",margin:"1em"},children:d}):e.jsxs("div",{id:"doctors-list",children:[e.jsxs(Y,{striped:!0,bordered:!0,hover:!0,responsive:!0,variant:"light",className:"my-4 shadow-sm rounded",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Room Number"}),e.jsx("th",{children:"Local Phone"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:c.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.roomNo}),e.jsx("td",{children:t.localPhone}),e.jsx("td",{children:e.jsx("div",{children:e.jsx(S,{variant:"outline-secondary",onClick:()=>q(t),children:"Edit"})})})]},t.id))})]}),e.jsx("div",{id:"pagination",children:e.jsxs(f,{children:[e.jsx(f.Prev,{onClick:()=>v(i-1),disabled:i===1}),K(),e.jsx(f.Next,{onClick:()=>v(i+1),disabled:i===E})]})})]}),k&&e.jsxs(Z,{open:k,onClose:L,children:[e.jsx(ee,{children:"Subscribe"}),e.jsxs(te,{children:[e.jsx(pe,{children:"To subscribe to this website, please enter your email address here. We will send updates occasionally."}),e.jsxs(a,{children:[e.jsxs(N,{children:[e.jsx(u,{children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"fw-bold",children:"Doctor's ID"}),e.jsx(a.Control,{type:"text",placeholder:"Enter Doctor's ID",value:o?o.id:"",readOnly:!0})]})}),e.jsx(u,{children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"fw-bold",children:"Doctor's Name"}),e.jsx(a.Control,{type:"text",placeholder:"Enter Doctor's Name",value:o?o.name:"",onChange:t=>h({...o,name:t.target.value})})]})})]}),e.jsx(N,{children:e.jsx(u,{children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"fw-bold",children:"Doctor's Department"}),e.jsxs(a.Select,{value:o?o.departmentId:"",onChange:t=>h({...o,departmentId:t.target.value}),children:[e.jsx("option",{value:"",children:"Set as Inactive"}),z.map(t=>e.jsx("option",{value:t.ID,children:t.Name},t.ID))]})]})})}),e.jsxs(N,{children:[e.jsx(u,{children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"fw-bold",children:"Room Number"}),e.jsx(a.Control,{type:"text",placeholder:"Enter Room Number",value:o?o.roomNumber:"",onChange:t=>h({...o,roomNumber:t.target.value})})]})}),e.jsx(u,{children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"fw-bold",children:"Local Phone"}),e.jsx(a.Control,{type:"text",placeholder:"Enter Local Phone",value:o?o.localPhone:"",onChange:t=>h({...o,localPhone:t.target.value})})]})})]})]})]}),e.jsxs(se,{children:[e.jsx(S,{variant:"outline-secondary",onClick:L,children:"Cancel"}),e.jsx(S,{variant:"outline-success",onClick:()=>V(),children:"Update"})]})]})]})};export{Je as default};
