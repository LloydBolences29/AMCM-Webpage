import{r as o,j as e}from"./index-36-KKcds.js";import{C as L}from"./Container-CWNLz4ck.js";import{R as b}from"./Row-BliNWPvQ.js";import{C as j}from"./Col-BmcAzTUq.js";import{C as S,B as E}from"./Card-bY2pyPz3.js";import{S as v,A as N}from"./Alert-r3bE59V6.js";import{F as s}from"./Form-ITmX9ULE.js";import{L as _}from"./ListGroup-ZCJ6XXiI.js";import{B as A}from"./Button-X8vOtK7J.js";import"./Footer-Dx7aH640.js";import"./CardHeaderContext-CRLuTnaL.js";import"./ButtonBase-D_-r8mrV.js";import"./DefaultPropsProvider-CD6q9gwS.js";import"./extends-CF3RwP-h.js";import"./createSimplePaletteValueFilter-DgdGvFQZ.js";import"./useSlot-C2xor1-a.js";import"./getReactElementRef-BvSF6LhZ.js";import"./ownerDocument-DW-IO8s5.js";import"./Paper-BP6E42GA.js";import"./createSvgIcon-CpiC1hUo.js";import"./CircularProgress-BBQYZ1eV.js";import"./hook-BFg16x6y.js";import"./Nav-9sPC8eOi.js";import"./Button-B1G84w8P.js";const oe=()=>{const f={doctor_department_id:"",name:"",schedule:"",schedule_type:"clinic",department:"",day_of_the_week:"",start_time:"",end_time:"",notes:"N/A"},[a,n]=o.useState(f),[w,m]=o.useState("idle"),[D,y]=o.useState(!1),[O,u]=o.useState(!1),[g,h]=o.useState(""),[l,p]=o.useState(""),[x,i]=o.useState([]),C="/api",c=(t,r)=>{r!=="clickaway"&&(y(!1),u(!1))},T=async()=>{try{const t=await fetch(`${C}/doctor/get-doctors-departments/${l}`,{credentials:"include"});if(t.ok){const r=await t.json();i(r)}else i([])}catch(t){console.error("Error fetching doctor data:",t)}},k=async t=>{t.preventDefault();try{const r=await fetch(`${C}/doctor/add-schedule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),credentials:"include"});if(console.log("To be sent: ",a),r.ok){const d=await r.json();console.log("New schedule added:",d),m("success"),n(f),p(""),h(d.message),y(!0)}else{const d=await r.json();console.error("Error adding schedule:",r.statusText),m("error"),h(d.message),u(!0)}}catch(r){console.log("Error submitting new schedule:",r),m("error"),h(r.message),u(!0)}},G=t=>{n({...a,doctor_department_id:t.id,name:t.name,department:t.department}),p(t.name),i([])};return o.useEffect(()=>{if(l.trim()===""){i([]);return}T(),console.log("Doctors Data: ",x)},[l]),console.log("Form Data: ",a),e.jsx(e.Fragment,{children:e.jsx(L,{className:"py-5",children:e.jsx(b,{className:"justify-content-center",children:e.jsx(j,{md:8,lg:6,children:e.jsxs(S,{className:"shadow-lg border-0",children:[e.jsx(S.Header,{className:"text-white text-center py-3",style:{backgroundColor:"#007682"},children:e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-user-md me-2"}),"Add New Doctor's Schedule"]})}),e.jsxs(S.Body,{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(E,{className:"mb-2",style:{backgroundColor:"#163235"},children:"Instructions"}),e.jsx("p",{className:"text-muted small",children:"Please fill in all the required information to add a new schedule for the doctor. Make sure all details are accurate before submitting."})]}),w==="success"?e.jsx(v,{open:D,autoHideDuration:5e3,onClose:c,children:e.jsx(N,{onClose:c,severity:"success",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:g})}):e.jsx(v,{open:O,autoHideDuration:5e3,onClose:c,children:e.jsx(N,{onClose:c,severity:"error",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:g})}),e.jsxs(s,{onSubmit:k,children:[e.jsxs(s.Group,{className:"mb-3 position-relative",children:[e.jsx(s.Label,{children:"Doctor's Name"}),e.jsx(s.Control,{type:"text",value:l,placeholder:"Search for a doctor...",onChange:t=>p(t.target.value),required:!0,autoComplete:"off"}),x.length>0&&e.jsx(_,{style:{position:"absolute",zIndex:1e3,width:"100%",maxHeight:"200px",overflowY:"auto"},children:x.map(t=>e.jsxs(_.Item,{action:!0,onClick:()=>G(t),children:[t.name," - ",t.department]},t.id))})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Department"}),e.jsx(s.Control,{type:"text",name:"Department",value:a.department,readOnly:!0,disabled:!0})]}),(a.department==="OBSTETRICS AND GYNECOLOGY / PERINATOLOGIST / SONOLOGIST"||a.department==="OBSTETRICS AND GYNECOLOGY / SONOLOGIST")&&e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Schedule Type"}),e.jsxs(s.Control,{as:"select",value:a.schedule_type,onChange:t=>n({...a,schedule_type:t.target.value}),children:[e.jsx("option",{value:"",children:"Select a schedule type"}),e.jsx("option",{value:"clinic",children:"Clinic"}),e.jsx("option",{value:"ultrasound",children:"Ultrasound"})]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Choose a day"}),e.jsxs(s.Select,{value:a.day_of_the_week,onChange:t=>n({...a,day_of_the_week:t.target.value}),children:[e.jsx("option",{value:"",children:"Select a day"}),e.jsx("option",{value:"Sun",children:"Sunday"}),e.jsx("option",{value:"Mon",children:"Monday"}),e.jsx("option",{value:"Tue",children:"Tuesday"}),e.jsx("option",{value:"Wed",children:"Wednesday"}),e.jsx("option",{value:"Thur",children:"Thursday"}),e.jsx("option",{value:"Fri",children:"Friday"}),e.jsx("option",{value:"Sat",children:"Saturday"})]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Additional Notes: "}),e.jsx(s.Control,{type:"text",rows:3,value:a.notes,onChange:t=>n({...a,notes:t.target.value})})]}),e.jsxs(b,{children:[e.jsx(j,{children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Start time"}),e.jsx(s.Control,{type:"time",value:a.start_time,onChange:t=>n({...a,start_time:t.target.value}),required:!0})]})}),e.jsx(j,{children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"End time"}),e.jsx(s.Control,{type:"time",id:"end_time",value:a.end_time,onChange:t=>n({...a,end_time:t.target.value}),required:!0})]})})]}),e.jsx(A,{type:"submit",style:{backgroundColor:"#007682",borderColor:"#007682"},children:"Submit"})]})]})]})})})})})};export{oe as default};
