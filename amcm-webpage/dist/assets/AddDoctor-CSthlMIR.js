import{r as o,j as e}from"./index-CU6FVKgc.js";import{C as D}from"./Container-C9sdSJD0.js";import{R as i}from"./Row-J6Wi_D9N.js";import{C as n}from"./Col-BOYcffD3.js";import{C as m,B as w}from"./Card-CARKmz2P.js";import{S as x,A as f}from"./Alert-DOzaPcP_.js";import{F as a}from"./Form-BWoNYBnf.js";import{B as k}from"./Button-ECdBtxHj.js";import"./Footer-Q0PT6RDh.js";import"./CardHeaderContext-Ciu6bF6Y.js";import"./ButtonBase-B6JcpL9Z.js";import"./DefaultPropsProvider-BEWS1EG7.js";import"./extends-CF3RwP-h.js";import"./createSimplePaletteValueFilter-CHMUn0vP.js";import"./useSlot-CCE1CtRx.js";import"./getReactElementRef-CFcaMeZi.js";import"./ownerDocument-DW-IO8s5.js";import"./Paper-3KbYhAFn.js";import"./createSvgIcon-CIQck3fE.js";import"./CircularProgress-DA1wQFbY.js";import"./Button-Dxk-fcaG.js";const Q=()=>{const u="/api",[j,h]=o.useState(!1),[N,d]=o.useState(!1),[g,p]=o.useState("idle"),[b,S]=o.useState([]),[r,l]=o.useState({name:"",roomNo:"",localPhone:"",departmentId:"",doctor_schedule:""}),c=(s,t)=>{t!=="clickaway"&&(h(!1),d(!1))},y=async()=>{try{const t=await(await fetch(`${u}/department/get-departments`,{credentials:"include"})).json();S(t)}catch(s){console.error("Error fetching departments:",s)}};o.useEffect(()=>{y()},[]);const C=async s=>{s.preventDefault();try{const t=await fetch(`${u}/doctor/add-doctor`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});if(t.ok){const v=await t.json();console.log("Doctor added successfully:",v),p("success"),h(!0),l({name:"",roomNo:"",localPhone:"",departmentId:""})}else d(!0)}catch(t){p("error"),d(!0),console.error("Error adding doctor:",t)}};return console.log("department id",r),e.jsx(D,{className:"py-5",children:e.jsx(i,{className:"justify-content-center",children:e.jsx(n,{md:8,lg:6,children:e.jsxs(m,{className:"shadow-lg border-0",children:[e.jsx(m.Header,{className:"text-white text-center py-3",style:{backgroundColor:"#007682"},children:e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-user-md me-2"}),"Add New Doctor"]})}),e.jsxs(m.Body,{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(w,{className:"mb-2",style:{backgroundColor:"#163235"},children:"Instructions"}),e.jsx("p",{className:"text-muted small",children:"Please fill in all the required information to add a new doctor to the system. Make sure all details are accurate before submitting."})]}),g==="success"?e.jsx(x,{open:j,autoHideDuration:5e3,onClose:c,children:e.jsx(f,{onClose:c,severity:"success",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:"Doctor saved successfully!"})}):e.jsx(x,{open:N,autoHideDuration:5e3,onClose:c,children:e.jsx(f,{onClose:c,severity:"error",variant:"filled",sx:{width:"100%",margin:"1em",fontSize:"1em"},children:"Failed on saving the Doctor!"})}),e.jsxs(a,{onSubmit:C,children:[e.jsx(i,{children:e.jsx(n,{md:12,children:e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{className:"fw-bold",children:e.jsx("i",{className:"fas fa-user me-2",children:"Doctor's Name"})}),e.jsx(a.Control,{type:"text",placeholder:"Enter doctor's full name",value:r.name,onChange:s=>l({...r,name:s.target.value}),required:!0,className:"form-control-lg"})]})})}),e.jsxs(i,{children:[e.jsx(n,{md:6,children:e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{className:"fw-bold",children:e.jsx("i",{className:"fas fa-door-open me-2",children:"Room Number"})}),e.jsx(a.Control,{type:"text",placeholder:"e.g., 201",value:r.roomNo,onChange:s=>l({...r,roomNo:s.target.value}),required:!0})]})}),e.jsx(n,{md:6,children:e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{className:"fw-bold",children:e.jsx("i",{className:"fas fa-phone me-2",children:"Local Phone"})}),e.jsx(a.Control,{type:"text",placeholder:"e.g., 2001",value:r.localPhone,onChange:s=>l({...r,localPhone:s.target.value}),required:!0})]})})]}),e.jsx(i,{children:e.jsx(n,{md:12,children:e.jsxs(a.Group,{className:"mb-4",children:[e.jsx(a.Label,{className:"fw-bold",children:e.jsx("i",{className:"fas fa-building me-2",children:"Department"})}),e.jsxs(a.Select,{value:r.departmentId,onChange:s=>l({...r,departmentId:s.target.value}),required:!0,className:"form-select-lg",children:[e.jsx("option",{value:"",children:"-- Select Department --"}),b.map(s=>e.jsx("option",{value:s.ID,children:s.Name},s.ID))]})]})})}),e.jsx("div",{className:"d-grid",children:e.jsxs(k,{type:"submit",size:"lg",className:"py-2",style:{backgroundColor:"#007682",borderColor:"#007682"},children:[e.jsx("i",{className:"fas fa-plus-circle me-2"}),"Add Doctor"]})})]})]})]})})})})};export{Q as default};
